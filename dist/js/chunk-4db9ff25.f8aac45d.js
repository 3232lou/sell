(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4db9ff25"],{"16c2":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pay"},[n("Header",{attrs:{title:"在线支付"}}),t.orderInfo?n("div",{staticClass:"main"},[n("div",{staticClass:"tip"},[n("p",{staticClass:"countdown-title"},[t._v("支付剩余时间")]),n("h3",{staticClass:"countdown-text"},[t._v(t._s(t.countDown))])])]):t._e(),n("section",{staticClass:"home"},[n("ul",{staticClass:"list info-list"},[n("li",[n("span",{staticClass:"order-name"},[t._v(t._s(t.orderInfo.shopInfo.name))]),n("span",{staticClass:"text-highlight"},[t._v("¥"+t._s(t.totalPrice))])])]),n("div",{staticClass:"title"},[t._v("在线支付")]),t._m(0)]),n("button",{staticClass:"btn-submit",attrs:{disabled:t.timeOut},on:{click:t.pay}},[t._v("\n    确认支付\n  ")])],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"list payment-list"},[i("li",{staticClass:"payment-list-item"},[i("div",{staticClass:"icon"},[i("img",{attrs:{src:n("68de"),alt:""}}),i("span",[t._v("微信")])]),i("i",{staticClass:"fa fa-check-circle selected"})])])}],s=(n("2b45"),n("0418")),r={name:"pay",components:{Header:s["a"]},data:function(){return{countDown:"00:15:00",timer:null,timeOut:!1}},beforeRouteEnter:function(t,e,n){n((function(t){t.countTimeDown(),t.addOrder()}))},methods:{pay:function(){var t=this,e={body:"爱吃外卖",out_trade_no:(new Date).getTime().toString(),total_fee:1};fetch("http://www.thenewstep.cn/wxzf/example/jsapi.php",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t.json()})).then((function(e){t.onBridgeReady(e)})).catch((function(t){alert("请求失败")}))},onBridgeReady:function(t){WeixinJSBridge.invoke("getBrandWCPayRequest",t,(function(t){t.err_msg}))},addOrder:function(){var t=this,e={orderInfo:this.orderInfo,userInfo:this.userInfo,totalPrice:this.totalPrice,remarkInfo:this.remarkInfo};this.axios.post("/api/user/add_order/".concat(localStorage.love_login),e).then((function(e){t.$router.push("/order")}))},countTimeDown:function(){var t=this,e=14,n=59;this.timer=setInterval((function(){if(n--,"00"==n&&"00"==e)return t.countDown="订单已超时",clearInterval(t.timer),void(t.timeOut=!0);"00"==n&&(n=59,e--,e<10&&(e="0minute")),n<10&&(n="0"+n),t.countDown="00:"+e+":"+n}),1e3)}},computed:{orderInfo:function(){return this.$store.getters.orderInfo},totalPrice:function(){return this.$store.getters.totalPrice},userInfo:function(){return this.$store.getters.userInfo},remarkInfo:function(){return this.$store.getters.remarkInfo}}},a=r,c=(n("d31c"),n("9ca4")),u=Object(c["a"])(a,i,o,!1,null,"164d1f47",null);e["default"]=u.exports},"190b":function(t,e,n){n("149f")&&"g"!=/./g.flags&&n("064e").f(RegExp.prototype,"flags",{configurable:!0,get:n("f1fe")})},"2b45":function(t,e,n){"use strict";n("190b");var i=n("69b3"),o=n("f1fe"),s=n("149f"),r="toString",a=/./[r],c=function(t){n("bf16")(RegExp.prototype,r,t,!0)};n("238a")((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?c((function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?o.call(t):void 0)})):a.name!=r&&c((function(){return a.call(this)}))},"68de":function(t,e,n){t.exports=n.p+"img/wechart.0055285e.jpg"},"8f51":function(t,e,n){},d31c:function(t,e,n){"use strict";var i=n("8f51"),o=n.n(i);o.a}}]);
//# sourceMappingURL=chunk-4db9ff25.f8aac45d.js.map
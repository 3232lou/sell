(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],u=0,d=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);f&&f(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var o=n[s];0!==i[o]&&(a=!1)}a&&(r.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},s={app:0},i={app:0},r=[];function o(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-212b2404":"8e90be3a","chunk-254f2b7c":"282d4aee","chunk-4ba9e641":"bda14bc3","chunk-4db9ff25":"f8aac45d","chunk-507e7fc7":"db91ffff","chunk-52b4ae62":"82b7170d","chunk-5be8861c":"31c14494","chunk-9d21197e":"72a0bb9a","chunk-e14a0cce":"82cba455","chunk-e540172a":"d3235653"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-212b2404":1,"chunk-254f2b7c":1,"chunk-4ba9e641":1,"chunk-4db9ff25":1,"chunk-507e7fc7":1,"chunk-52b4ae62":1,"chunk-5be8861c":1,"chunk-9d21197e":1,"chunk-e14a0cce":1,"chunk-e540172a":1};s[t]?e.push(s[t]):0!==s[t]&&n[t]&&e.push(s[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-212b2404":"eeb84647","chunk-254f2b7c":"11129587","chunk-4ba9e641":"38e438da","chunk-4db9ff25":"ab17300a","chunk-507e7fc7":"a100365c","chunk-52b4ae62":"e8c4b8a9","chunk-5be8861c":"86d1dd3f","chunk-9d21197e":"4335eac9","chunk-e14a0cce":"7804bf0c","chunk-e540172a":"eff7fc1f"}[t]+".css",i=c.p+a,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var l=r[o],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===i))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){l=d[o],u=l.getAttribute("data-href");if(u===a||u===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||i,r=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=a,delete s[t],f.parentNode.removeChild(f),n(r)},f.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){s[t]=0})));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=r);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(f);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",d.name="ChunkLoadError",d.type=a,d.request=s,n[1](d)}i[t]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/app/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var f=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0418":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLeft,expression:"isLeft"}],staticClass:"header-button"},[n("i",{staticClass:"return"}),n("button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])]),n("h1",{staticClass:"header-title"},[t._v(t._s(t.title))])])},s=[],i={name:"Header",props:{title:String,isLeft:{type:Boolean,default:!0}}},r=i,o=(n("15ab"),n("9ca4")),c=Object(o["a"])(r,a,s,!1,null,"01a631cc",null);e["a"]=c.exports},"053d":function(t,e,n){"use strict";var a=n("208c"),s=n.n(a);s.a},"0a9a":function(t,e,n){"use strict";var a=n("6d6c"),s=n.n(a);s.a},"0e36":function(t,e,n){"use strict";var a=n("919c"),s=n.n(a);s.a},"10f0":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Rating_gray"},t._l(t.itemClass,(function(t,e){return n("i",{key:e,staticClass:"fa",class:t})})),0)},s=[],i=(n("163d"),5),r="fa-star",o="fa-star-half-empty",c="fa-star-o",l={name:"Rating",props:{rating:Number},computed:{itemClass:function(){for(var t=[],e=Math.floor(2*this.rating)/2,n=e%1!==0,a=Math.floor(e),s=0;s<a;s++)t.push(r);n&&t.push(o);while(t.length<i)t.push(c);return t}}},u=l,d=(n("472e"),n("9ca4")),f=Object(d["a"])(u,a,s,!1,null,"7ef73aeb",null);e["a"]=f.exports},"134a":function(t,e,n){},"15ab":function(t,e,n){"use strict";var a=n("e6b9"),s=n.n(a);s.a},"1a12":function(t,e,n){},"208c":function(t,e,n){},"2cce":function(t,e,n){},3511:function(t,e,n){},"3c66":function(t,e,n){"use strict";var a=n("1a12"),s=n.n(a);s.a},"472e":function(t,e,n){"use strict";var a=n("5bb4"),s=n.n(a);s.a},"481a":function(t,e,n){"use strict";var a=n("6729"),s=n.n(a);s.a},"48f6":function(t,e,n){},"4ac5":function(t,e,n){},"4f2e":function(t,e,n){"use strict";var a=n("3511"),s=n.n(a);s.a},"51e0":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e44b"),n("6648"),n("5f54"),n("f0e6");var a=n("0261"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("keep-alive",[n("router-view")],1)],1)},i=[],r=(n("9a33"),{name:"app",created:function(){this.getLocation()},methods:{getLocation:function(){var t=this;AMap.plugin("AMap.Geolocation",(function(){var e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"});function n(e){console.log(e),t.$store.dispatch("setLocation",e),t.$store.dispatch("setAddress",e.formattedAddress)}function a(e){t.getLngLatLocation()}e.getCurrentPosition(),AMap.event.addListener(e,"complete",n),AMap.event.addListener(e,"error",a)}))},getLngLatLocation:function(){var t=this;AMap.plugin("AMap.CitySearch",(function(){var e=new AMap.CitySearch;e.getLocalCity((function(e,n){"complete"===e&&"OK"===n.info&&AMap.plugin("AMap.Geocoder",(function(){var e=new AMap.Geocoder({city:"result.adcode"}),a=n.rectangle.split(";")[0].split(",");e.getAddress(a,(function(e,a){"complete"===e&&"OK"===a.info&&(t.$store.dispatch("setLocation",{addressComponent:{city:n.city,province:n.province},formattedAddress:a.regeocode.formattedAddress}),t.$store.dispatch("setAddress",a.regeocode.formattedAddress))}))}))}))}))}}}),o=r,c=n("9ca4"),l=Object(c["a"])(o,s,i,!1,null,null,null),u=l.exports,d=n("3f11"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index"},[n("router-view"),n("TarBar",{attrs:{data:t.tabbarData}})],1)},h=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabbar"},t._l(t.data,(function(e,a){return n("router-link",{key:a,staticClass:"tab-item",attrs:{to:e.path,"active-class":"is-selected"}},[n("div",{staticClass:"tab-item-icon"},[n("div",{class:"photo-"+e.icon})]),n("div",{staticClass:"tab-item-label"},[t._v(t._s(e.title))])])})),1)},m=[],v={name:"tarbar",props:{data:Array}},_=v,b=(n("add2"),Object(c["a"])(_,p,m,!1,null,null,null)),y=b.exports,g={name:"index",data:function(){return{tabbarData:[{title:"首页",icon:"index",path:"/home"},{title:"订单",icon:"order",path:"/order"},{title:"我的",icon:"me",path:"/me"}]}},components:{TarBar:y}},C=g,k=(n("0a9a"),Object(c["a"])(C,f,h,!1,null,"36383ae8",null)),w=k.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[t._m(0),n("InputGroup",{attrs:{type:"number",placeholder:"手机号",btnTitle:t.btnTitle,disabled:t.disabled,error:t.errors.phone},on:{btnClick:t.getVerifyCode},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),n("InputGroup",{attrs:{type:"number",placeholder:"验证码",error:t.errors.code},model:{value:t.verifyCode,callback:function(e){t.verifyCode=e},expression:"verifyCode"}}),t._m(1),n("div",{staticClass:"login_btn"},[n("button",{attrs:{disabled:t.isClick},on:{click:t.handleLogin}},[t._v("按钮")])])],1)},I=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"logo"},[a("img",{attrs:{src:n("b640"),alt:"爱吃外卖"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login_des"},[n("p",[t._v("\n            新用户登录自动注册，表示已同意\n            "),n("span",[t._v("《用户服务协议》")])])])}],S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text_group"},[n("div",{staticClass:"input_group",class:{"is-invalid":t.error}},[n("input",{attrs:{type:t.type,placeholder:t.placeholder,name:t.name},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),t.btnTitle?n("button",{attrs:{disabled:t.disabled},on:{click:function(e){return t.$emit("btnClick")}}},[t._v(t._s(t.btnTitle))]):t._e()]),t.error?n("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.error))]):t._e()])},$=[],O={props:{type:{type:String,default:"text"},placeholder:String,value:String,name:String,btnTitle:String,disabled:Boolean,error:String}},E=O,A=(n("053d"),Object(c["a"])(E,S,$,!1,null,null,null)),L=A.exports,T={name:"login",data:function(){return{phone:"",verifyCode:"",errors:{},btnTitle:"获取验证码",disabled:!1}},computed:{isClick:function(){return!this.phone||!this.verifyCode}},methods:{handleLogin:function(){var t=this;if(!this.validatephone())return this.errors={phone:"请输入正确的手机号码"},!1;this.errors={},this.axios.post("/api/posts/sms_back",{phone:this.phone,code:this.verifyCode}).then((function(e){console.log(e.data),localStorage.setItem("love_login",e.data.user._id),t.$router.push("/")})).catch((function(e){t.erros={code:e.response.data.msg}})),this.errors={},this.axios.post("/api/posts/sms_back",{phone:this.phone,code:this.verifyCode}).then((function(e){localStorage.setItem("love_login",e.data.user._id),t.$router.push("/")})).catch((function(e){t.erros={code:e.response.data.msg}}))},getVerifyCode:function(){this.validatephone()&&(this.validateBtn(),this.axios.post("/api/posts/sms_send",{tpl_id:"158278",key:"b5bf35e3de04e9ab10ec02b24509b3d8",phone:this.phone}).then((function(t){console.log(t)})))},validateBtn:function(){var t=this,e=60,n=setInterval((function(){0==e?(clearInterval(n),t.btnTitle="获取验证码",t.disabled=!1):(t.btnTitle=e+"秒后重试",t.disabled=!0,e--)}),1e3)},validatephone:function(){return this.phone?/^1[345678]\d{9}$/.test(this.phone)?(this.errors={},!0):(this.errors={phone:"请输入正确的手机号码"},!1):(this.errors={phone:"手机号码不能为空"},!1)}},components:{InputGroup:L}},D=T,j=(n("e55b"),Object(c["a"])(D,x,I,!1,null,"856e9d50",null)),F=j.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"header"},[n("div",{staticClass:"address_map",on:{click:function(e){return t.$router.push({name:"address",params:{city:t.city}})}}},[n("i",{staticClass:"map-marker"}),n("span",{staticClass:"address"},[t._v("收货地址:"+t._s(t.address))]),n("i",{staticClass:"desc"})])]),n("div",{staticClass:"search_wrap",class:{filterView:t.showFilter}},[n("div",{staticClass:"shop_search",on:{click:function(e){return t.$router.push("/search")}}},[n("i",{staticClass:"search"}),t._v("\n            搜索商家  商家名称\n        ")])]),n("div",{staticClass:"container"},[n("mt-swipe",{staticClass:"swiper",attrs:{auto:4e3}},t._l(t.swipeImgs,(function(t,e){return n("mt-swipe-item",{key:e},[n("img",{attrs:{src:t,alt:""}})])})),1),n("mt-swipe",{staticClass:"entries",attrs:{auto:0}},t._l(t.entries,(function(e,a){return n("mt-swipe-item",{key:a,staticClass:"entry_wrap"},[t._l(e,(function(e,a){return n("a",{key:a,staticClass:"foodentry",attrs:{href:"#"}},[n("div",{staticClass:"img_wrap"},[n("img",{attrs:{src:e.image,alt:""}})]),n("span",[t._v(t._s(e.name))])])})),n("div",{staticClass:"clear"})],2)})),1)],1),n("div",{staticClass:"shoplist-title"},[t._v("推荐商家")]),n("FilterView",{attrs:{filterData:t.filterData},on:{update:t.update,searchFixed:t.showFilterView}}),n("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadData,"bottom-method":t.loadMore,"auto-fill":!1,"bottom-all-loaded":t.allLoaded,bottomPullText:t.bottomPullText}},[n("div",{staticClass:"shoplist"},t._l(t.restaurants,(function(t,e){return n("IndexShop",{key:e,attrs:{restaurant:t.restaurant}})})),1)])],1)},R=[],M=(n("6d57"),n("660a")),N=n.n(M),B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{open:t.isSort||t.isScreen},on:{click:function(e){return e.target!==e.currentTarget?null:t.hideView(e)}}},[t.filterData?n("div",{staticClass:"filter_wrap"},[n("div",{staticClass:"filter"},t._l(t.filterData.navTab,(function(e,a){return n("div",{key:a,staticClass:"filter_nav",class:{filter_bold:t.currentFilter==a},on:{click:function(e){return t.filterSort(a)}}},[n("span",[t._v(t._s(e.name))]),e.icon?n("div",{class:"filter_"+e.icon}):t._e()])})),0)]):t._e(),t.isSort?n("section",{staticClass:"filter_extend"},[n("ul",t._l(t.filterData.sortBy,(function(e,a){return n("li",{key:a,on:{click:function(n){return t.selectSort(e,a)}}},[n("span",{class:{selectName:t.currentSort==a}},[t._v(t._s(e.name))]),t.currentSort==a?n("i",{staticClass:"hook"}):t._e(),n("div",{staticClass:"clear"})])})),0)]):t._e(),t.isScreen?n("section",{staticClass:"filter_extend"},[n("div",{staticClass:"filter_sort"},t._l(t.filterData.screenBy,(function(e,a){return n("div",{key:a,staticClass:"morefilter"},[n("p",{staticClass:"title"},[t._v(t._s(e.title))]),n("ul",t._l(e.data,(function(a,s){return n("li",{key:s,class:{selected:a.select},on:{click:function(n){return t.selectScreen(a,e)}}},[a.icon?n("img",{attrs:{src:a.icon,alt:""}}):t._e(),n("span",[t._v(t._s(a.name))])])})),0)])})),0),n("div",{staticClass:"morefilter_btn"},[n("span",{staticClass:"morefilter_clear",class:{edit:t.edit},on:{click:t.clearFilter}},[t._v("清空")]),n("span",{staticClass:"morefilter_ok",on:{click:t.filterOk}},[t._v("确定")])])]):t._e()])},V=[],K=(n("cc57"),{name:"FilterView",props:{filterData:Object},data:function(){return{currentFilter:0,isSort:!1,currentSort:0,isScreen:!1}},computed:{edit:function(){var t=!1;return this.filterData.screenBy.forEach((function(e){e.data.forEach((function(e){e.select&&(t=!0)}))})),t}},methods:{filterSort:function(t){switch(this.currentFilter=t,t){case 0:this.isSort=!0,this.$emit("searchFixed",!0);break;case 1:this.$emit("update",{condition:this.filterData.navTab[1].condition}),this.hideView();break;case 2:this.$emit("update",{condition:this.filterData.navTab[2].condition}),this.hideView();break;case 3:this.isScreen=!0,this.isSort=!1,this.$emit("searchFixed",!0);break;default:this.hideView();break}},hideView:function(){this.isSort=!1,this.isScreen=!1,this.$emit("searchFixed",!1)},selectSort:function(t,e){this.currentSort=e,this.filterData.navTab[0].name=this.filterData.sortBy[e].name,this.hideView(),this.$emit("update",{condition:t.code})},selectScreen:function(t,e){"MPI"!==e.id&&e.data.forEach((function(t){t.select=!1})),t.select=!t.select},clearFilter:function(){this.filterData.screenBy.forEach((function(t){t.data.forEach((function(t){t.select=!1}))}))},filterOk:function(){var t={MPI:"",offer:"",per:""},e="";this.filterData.screenBy.forEach((function(n){n.data.forEach((function(a,s){a.select&&("MPI"!==n.id?t[n.id]=a.code:(e+=a.code+",",t[n.id]=e))}))})),this.$emit("update",{condition:t}),this.hideView()}}}),H=K,G=(n("ab69"),Object(c["a"])(H,B,V,!1,null,"22feef92",null)),U=G.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"index_container"},[n("div",{staticClass:"index_shopInfo",on:{click:function(e){return t.$router.push({name:"shop"})}}},[n("div",{staticClass:"logo_container"},[n("img",{attrs:{src:t.restaurant.image_path,alt:""}})]),n("div",{staticClass:"index_main"},[n("div",{staticClass:"index_shopname"},[t.restaurant.is_premium?n("i",[t._v("品牌")]):t._e(),n("span",[t._v(t._s(t.restaurant.name))])]),n("div",{staticClass:"index_rateWrap"},[n("div",[n("Rating",{attrs:{rating:t.restaurant.rating}}),n("span",{staticClass:"rate"},[t._v(t._s(t.restaurant.rating))]),n("span",[t._v("月售"+t._s(t.restaurant.recent_order_num)+"单")])],1),t.restaurant.delivery_mode?n("div",{staticClass:"delivery"},[n("span",{staticClass:"icon_hollow"},[t._v(t._s(t.restaurant.delivery_mode.text))])]):t._e()]),n("div",{staticClass:"index_moneyLimit"},[n("div",[n("span",[t._v("￥"+t._s(t.restaurant.float_minimum_order_amount)+"起送")]),t._v("\n                    |\n                    "),n("span",[t._v("配送费¥"+t._s(t.restaurant.float_delivery_fee))])]),n("div",{staticClass:"index_distanceWrap"},[n("span",[t._v(t._s((t.restaurant.distance/1e3).toFixed(2))+"km")]),t._v("\n                    |\n                    "),n("span",[t._v(t._s(t.restaurant.order_lead_time)+"分钟")])])])])])])},W=[],q=n("10f0"),J={name:"IndexShop",props:{restaurant:Object},components:{Rating:q["a"]}},Q=J,X=(n("6c4a"),Object(c["a"])(Q,z,W,!1,null,"0405c29a",null)),Y=X.exports,Z={name:"home",data:function(){return{swipeImgs:[],entries:[],filterData:null,showFilter:!1,page:1,size:5,allLoaded:!1,restaurants:[],bottomPullText:"上拉加载更多"}},components:{FilterView:U,IndexShop:Y},computed:{address:function(){return this.$store.getters.address},city:function(){return this.$store.getters.location.addressComponent.city||this.$store.getters.location.addressComponent.province}},created:function(){this.getData()},methods:{showFilterView:function(t){this.showFilter=t},getData:function(){var t=this;this.axios("/api/profile/shopping").then((function(e){t.swipeImgs=e.data.swipeImgs,t.entries=e.data.entries})).catch(),this.axios("/api/profile/filter").then((function(e){t.filterData=e.data})),this.axios.post("/api/profile/restaurants/".concat(this.page,"/").concat(this.size)).then((function(e){t.restaurants=e.data}))},update:function(t){},loadData:function(){var t=this;this.page=1,this.allLoaded=!1,this.bottomPullText="上拉加载更多",this.axios.post("/api/profile/restaurants/".concat(this.page,"/").concat(this.size)).then((function(e){t.$refs.loadmore.onTopLoaded(),t.restaurants=e.data}))},loadMore:function(){var t=this;this.allLoaded||(this.page++,this.axios.post("/api/profile/restaurants/".concat(this.page,"/").concat(this.size)).then((function(e){t.$refs.loadmore.onBottomLoaded(),e.data.length>0?(e.data.forEach((function(e){t.restaurants.push(e)})),e.data<t.size&&(t.allLoaded=!0,t.bottomPullText="没有更多了哦")):(t.allLoaded=!0,t.bottomPullText="没有更多了哦")})))}}},tt=Z,et=(n("481a"),Object(c["a"])(tt,P,R,!1,null,"6a652e9b",null)),nt=et.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"order"},t._l(t.orderlist,(function(e,a){return n("div",{key:a,staticClass:"order-card-body"},[e.orderInfo?n("div",{staticClass:"order-card-wrap",on:{click:function(n){return t.$router.push({name:"orderinfo",params:e})}}},[n("img",{attrs:{src:e.orderInfo.shopInfo.image_path,alt:""}}),n("div",{staticClass:"order-card-content"},[n("div",{staticClass:"order-card-head"},[n("div",{staticClass:"title"},[n("a",[n("span",[t._v(t._s(e.orderInfo.shopInfo.name))]),n("i",{staticClass:"fa fa-angle-right"})]),n("p",[t._v("订单已完成")])]),n("p",{staticClass:"date-time"},[t._v(t._s(e.date))])]),n("div",{staticClass:"order-card-detail"},[n("p",{staticClass:"detail"},[t._v(t._s(e.orderInfo.selectFoods[0].name))]),n("p",{staticClass:"price"},[t._v("¥"+t._s(e.totalPrice))])])])]):t._e(),e.orderInfo?n("div",{staticClass:"order-card-bottom"},[n("button",{staticClass:"cardbutton",on:{click:function(e){return t.$router.push("/shop")}}},[t._v("再来一单")])]):t._e()])})),0)},st=[],it={name:"order",data:function(){return{orderlist:[]}},beforeRouteEnter:function(t,e,n){n((function(t){t.getData()}))},methods:{getData:function(){var t=this;this.axios("/api/user/orders/".concat(localStorage.love_login)).then((function(e){console.log(e.data),t.orderlist=e.data.orderlist,console.log(t.orderlist)}))}}},rt=it,ot=(n("3c66"),Object(c["a"])(rt,at,st,!1,null,"789827c4",null)),ct=ot.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"me"},[n("div",{staticClass:"headInfo"},[n("div",{staticClass:"head-img"}),n("div",{staticClass:"head-profile"},[t.userInfo?n("p",{staticClass:"user-id"},[t._v(t._s(t.userInfo._id))]):n("p",{staticClass:"user-id",on:{click:t.handleLogin}},[t._v("登录/注册")]),n("p",{staticClass:"user-phone"},[n("i",{staticClass:"fa fa-mobile"}),t.userInfo?n("span",[t._v(t._s(t.encryptPhone(t.userInfo.phone)))]):n("span",[t._v("登录后享受更多特权")])])]),n("i",{staticClass:"fa fa-angle-right"})]),t.userInfo?n("div",[n("div",{staticClass:"address-cell"},[n("i",{staticClass:"fa fa-map-marker"}),n("div",{staticClass:"address-index",on:{click:t.myAddress}},[n("span",[t._v("我的地址")]),n("i",{staticClass:"fa fa-angle-right"})])]),n("button",{staticClass:"loginOut-btn",on:{click:t.handleLogout}},[t._v("退出登录")])]):t._e()])},ut=[],dt=(n("f548"),{name:"me",data:function(){return{userInfo:""}},beforeRouteEnter:function(t,e,n){n((function(t){return t.getData()}))},methods:{handleLogin:function(){this.$router.push("/login")},getData:function(){var t=this,e=localStorage.love_login;this.axios("/api/user/user_info/".concat(e)).then((function(e){console.log(e.data),t.userInfo=e.data}))},encryptPhone:function(t){return t.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")},handleLogout:function(){localStorage.removeItem("love_login"),this.$router.push("/login")},myAddress:function(){this.userInfo.myAddress.length>0?this.$router.push("/myaddress"):this.$router.push({name:"addaddress",params:{title:"添加地址",addressInfo:{name:"",sex:"",phone:"",address:"",bottom:"",tag:""}}})}}}),ft=dt,ht=(n("4f2e"),Object(c["a"])(ft,lt,ut,!1,null,"6c897572",null)),pt=ht.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"address"},[n("Header",{attrs:{isLeft:!0,title:"选择收货地址"}}),n("div",{staticClass:"city_search"},[n("div",{staticClass:"search"},[n("span",{staticClass:"city",on:{click:function(e){return t.$router.push("/city")}}},[t._v(t._s(t.city)+"\n               "),n("i",{staticClass:"down"})]),n("i",{staticClass:"find"}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.search_val,expression:"search_val"}],attrs:{type:"text",placeholder:"小区/写字楼/学校等"},domProps:{value:t.search_val},on:{input:function(e){e.target.composing||(t.search_val=e.target.value)}}})]),n("Location",{attrs:{address:t.address},on:{click:t.selectAddress}})],1),n("div",{staticClass:"area"},t._l(t.areaList,(function(e,a){return n("ul",{key:a,staticClass:"area_list"},[n("li",{on:{click:function(n){return t.selectAddress(e)}}},[n("h4",[t._v(t._s(e.name))]),n("p",[t._v(t._s(e.district)+t._s(e.address))])])])})),0)],1)},vt=[],_t=(n("c0c3"),n("0418")),bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"title"},[t._v("当前定位\n  "),n("div",{staticClass:"des",on:{click:function(e){return t.$emit("click")}}},[n("i",{staticClass:"location"}),n("span",[t._v(t._s(t.address))])])])])},yt=[],gt={name:"location",props:{address:String}},Ct=gt,kt=(n("fb63"),Object(c["a"])(Ct,bt,yt,!1,null,"5983bebc",null)),wt=kt.exports,xt={name:"Address",components:{Header:_t["a"],Location:wt},beforeRouteEnter:function(t,e,n){n((function(e){e.city=t.params.city}))},data:function(){return{city:"",search_val:"",areaList:[]}},computed:{address:function(){return this.$store.getters.location.formattedAddress}},watch:{search_val:function(){this.searchPlace()}},methods:{searchPlace:function(){var t=this;AMap.plugin("AMap.Autocomplete",(function(){var e={city:"self.city"},n=new AMap.Autocomplete(e);n.search(t.search_val,(function(e,n){console.log(n),t.areaList=n.tips}))}))},selectAddress:function(t){t?this.$store.dispatch("setAddress",t.district+t.address+t.name):this.$store.dispatch("setAddress",this.address),this.$router.push("/home")}}},It=xt,St=(n("5753"),Object(c["a"])(It,mt,vt,!1,null,"3d962262",null)),$t=St.exports,Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"city"},[n("div",{staticClass:"search_wrap"},[n("div",{staticClass:"search"},[n("i",{staticClass:"look"}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.city_val,expression:"city_val"}],attrs:{type:"text",placeholder:"请输入城市名"},domProps:{value:t.city_val},on:{input:function(e){e.target.composing||(t.city_val=e.target.value)}}})]),n("button",{on:{click:function(e){return t.$router.push({name:"address",params:{city:t.city}})}}},[t._v("取消")])]),0==t.searchList.length?n("div",{staticStyle:{height:"100%"}},[n("div",{staticClass:"location"},[n("Location",{attrs:{address:t.city},on:{click:function(e){return t.selectCity({name:t.city})}}})],1),n("Alphabet",{ref:"allcity",attrs:{cityInfo:t.cityInfo,keys:t.keys},on:{selectCity:t.selectCity}})],1):n("div",{staticClass:"search_list"},[n("ul",t._l(t.searchList,(function(e,a){return n("li",{key:a,on:{click:function(n){return t.selectCity(e)}}},[t._v(t._s(e.name))])})),0)])])},Et=[],At=(n("c904"),n("e10e"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.cityInfo?n("div",{ref:"area_scroll",staticClass:"area"},[n("div",{staticClass:"scroll_wrap"},[n("div",{staticClass:"hot_wrap citylist"},[n("div",{staticClass:"title"},[t._v("热门城市")]),n("ul",{staticClass:"hot_city"},t._l(t.cityInfo.hotCities,(function(e,a){return n("li",{key:a,on:{click:function(n){return t.$emit("selectCity",e)}}},[t._v("\n                    "+t._s(e.name)+"\n                ")])})),0)]),n("div",{staticClass:"city_wrap"},t._l(t.keys,(function(e,a){return n("div",{key:a,staticClass:"city_content citylist"},[n("div",{staticClass:"title"},[t._v(t._s(e))]),n("ul",{staticClass:"citys"},t._l(t.cityInfo[e],(function(e,a){return n("li",{key:a,on:{click:function(n){return t.$emit("selectCity",e)}}},[t._v(t._s(e.name))])})),0)])})),0)]),n("div",{staticClass:"area_keys"},[n("ul",[n("li",{on:{click:function(e){return t.selectKey(0)}}},[t._v("#")]),t._l(t.keys,(function(e,a){return n("li",{key:a,on:{click:function(e){return t.selectKey(a+1)}}},[t._v(t._s(e))])}))],2)])]):t._e()}),Lt=[],Tt=n("ecd2"),Dt={name:"Alphabet",data:function(){return{scroll:null}},props:{cityInfo:Object,keys:Array},methods:{initScroll:function(){this.scroll=new Tt["a"](this.$refs.area_scroll,{click:!0})},selectKey:function(t){var e=this.$refs.area_scroll.getElementsByClassName("citylist"),n=e[t];this.scroll.scrollToElement(n,250),console.log(n)}}},jt=Dt,Ft=(n("7c37"),Object(c["a"])(jt,At,Lt,!1,null,"4cf74652",null)),Pt=Ft.exports,Rt={name:"city",components:{Location:wt,Alphabet:Pt},data:function(){return{city_val:"",cityInfo:null,keys:[],allCities:[],searchList:[]}},created:function(){this.getCityInfo()},watch:{city_val:function(){this.searchCity()}},methods:{getCityInfo:function(){var t=this;this.axios("/api/posts/cities").then((function(e){console.log(e.data),t.cityInfo=e.data,t.keys=Object.keys(e.data),t.keys.pop(),t.keys.sort(),t.$nextTick((function(){t.$refs.allcity.initScroll()})),t.keys.forEach((function(e){t.cityInfo[e].forEach((function(e){t.allCities.push(e)}))}))})).catch((function(t){console.log(err)}))},selectCity:function(t){this.$router.push({name:"address",params:{city:t.name}})},searchCity:function(){var t=this;this.city_val?this.searchList=this.allCities.filter((function(e){return-1!=e.name.indexOf(t.city_val)})):this.searchList=[]}},computed:{city:function(){return this.$store.getters.location.addressComponent.city||this.$store.getters.location.addressComponent.province}}},Mt=Rt,Nt=(n("85a4"),Object(c["a"])(Mt,Ot,Et,!1,null,"89a4d14c",null)),Bt=Nt.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("Hearder",{attrs:{isLtft:!0}}),a("div",{staticClass:"search_header"},[a("form",{staticClass:"search_wrap"},[a("i",{staticClass:"fa fa-search"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.key_word,expression:"key_word"}],attrs:{type:"text",placeholder:"请输入商家信息、商品信息"},domProps:{value:t.key_word},on:{input:function(e){e.target.composing||(t.key_word=e.target.value)}}}),a("button",{on:{click:function(e){return e.preventDefault(),t.searchHandle(e)}}},[t._v("搜索")])])]),t.result&&!t.showShop?a("div",{staticClass:"shop"},[t.empty?a("div",{staticClass:"empty_wrap"},[a("img",{attrs:{src:n("d730"),alt:""}}),t._m(0)]):a("div",[a("search-index",{attrs:{data:t.result.restaurants},on:{click:function(e){return t.$router.push("/shop")}}}),a("search-index",{attrs:{data:t.result.words},on:{click:t.showItemClick}})],1)]):t._e(),t.showShop?a("div",{staticClass:"container"},[a("FilterView",{attrs:{filterData:t.filterData},on:{update:t.update}})],1):t._e()],1)},Kt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"empty_txt"},[n("h4",[t._v("附近没有搜索结果")]),n("span",[t._v("换个关键词试一试吧")])])}],Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"search_list"},t._l(t.data,(function(e,a){return n("li",{key:a,on:{click:function(e){return t.$emit("click")}}},[e.image_path?n("img",{attrs:{src:e.image_path,alt:""}}):n("i",{staticClass:"fa fa-search"}),n("div",{staticClass:"shopitem"},[n("span",{staticClass:"title"},[t._v(t._s(e.name||e))]),e.rating?n("span",{staticClass:"rating"},[t._v("评分"+t._s(e.rating))]):t._e()])])})),0)},Gt=[],Ut={name:"SearchIndex",props:{data:Array}},zt=Ut,Wt=(n("ff60"),Object(c["a"])(zt,Ht,Gt,!1,null,"7b3cdaf7",null)),qt=Wt.exports,Jt={name:"Search",components:{Hearder:_t["a"],SearchIndex:qt,FilterView:U},data:function(){return{key_word:"",result:null,empty:!1,showShop:!1,filterData:null}},watch:{key_word:function(){this.empty=!1,this.showShop=!1,this.keyWordChange()}},methods:{keyWordChange:function(){var t=this;this.axios("/api/profile/typeahead/".concat(this.key_word)).then((function(e){console.log(e.data),t.result=e.data})).catch((function(e){t.result=null}))},searchHandle:function(){this.key_word&&(this.result&&(this.result.restaurants.length>0||this.result.words.length>0)?this.showShop=!0:this.empty=!0)},showItemClick:function(){this.showShop=!0},update:function(t){this.data=condation,this.showItemClick()}},created:function(){var t=this;this.axios("/api/profile/filter").then((function(e){t.filterData=e.data}))}},Qt=Jt,Xt=(n("0e36"),Object(c["a"])(Qt,Vt,Kt,!1,null,"dde51ad2",null)),Yt=Xt.exports;a["default"].use(d["a"]);var Zt,te=new d["a"]({mode:"history",base:"/app/",linkActiveClass:"active",routes:[{path:"/",component:w,children:[{path:"",component:nt},{path:"/home",name:"home",component:nt},{path:"/order",name:"order",component:ct},{path:"/me",name:"me",component:pt},{path:"/address",name:"address",component:$t},{path:"/city",name:"city",component:Bt}]},{path:"/login",name:"login",component:F},,{path:"/myaddress",name:"myaddress",component:function(){return n.e("chunk-e14a0cce").then(n.bind(null,"7911"))}},{path:"/addaddress",name:"addaddress",component:function(){return n.e("chunk-9d21197e").then(n.bind(null,"0e45"))}},{path:"/settlement",name:"settlement",component:function(){return n.e("chunk-52b4ae62").then(n.bind(null,"bc78"))}},{path:"/search",name:"search",component:Yt},{path:"/remark",name:"remark",component:function(){return n.e("chunk-254f2b7c").then(n.bind(null,"21b7"))}},{path:"/pay",name:"pay",component:function(){return n.e("chunk-4db9ff25").then(n.bind(null,"16c2"))}},{path:"/orderinfo",name:"orderinfo",component:function(){return n.e("chunk-5be8861c").then(n.bind(null,"0f76"))}},{path:"/shop",name:"shop",component:function(){return n.e("chunk-212b2404").then(n.bind(null,"fd46"))},redirect:"/goods",children:[{path:"/goods",name:"goods",component:function(){return n.e("chunk-4ba9e641").then(n.bind(null,"e0a9"))}},{path:"/comments",name:"comments",component:function(){return n.e("chunk-507e7fc7").then(n.bind(null,"8f78"))}},{path:"/seller",name:"seller",component:function(){return n.e("chunk-e540172a").then(n.bind(null,"8f6f"))}}]}]}),ee=n("9bef"),ne=n("9f3a");a["default"].use(ne["a"]);var ae={SET_LOCATION:"SET_LOCATION",SET_ADDRESS:"SET_ADDRESS",ORDER_INFO:"ORDER_INFO",USER_INFO:"USER_INFO",REMARK_INFO:"REMARK_INFO"},se={location:{},address:"",orderInfo:null,userInfo:null,remarkInfo:{tableware:"",remark:""}},ie={location:function(t){return t.location},address:function(t){return t.address},orderInfo:function(t){return t.orderInfo},userInfo:function(t){return t.userInfo},totalPrice:function(t){var e=0;if(t.orderInfo){var n=t.orderInfo.selectFoods;n.forEach((function(t){e+=t.activity.fixed_price*t.count})),e+=t.orderInfo.shopInfo.float_delivery_fee}return e},remarkInfo:function(t){return t.remarkInfo}},re={setLocation:function(t,e){var n=t.commit;n(ae.SET_LOCATION,e)},setAddress:function(t,e){var n=t.commit;n(ae.SET_ADDRESS,e)},setOrderInfo:function(t,e){var n=t.commit;n(ae.ORDER_INFO,e)},setUserInfo:function(t,e){var n=t.commit;n(ae.USER_INFO,e)},setRemarkInfo:function(t,e){var n=t.commit;n(ae.REMARK_INFO,e)}},oe=(Zt={},Object(ee["a"])(Zt,ae.SET_LOCATION,(function(t,e){t.location=e||null})),Object(ee["a"])(Zt,ae.SET_ADDRESS,(function(t,e){t.address=e||""})),Object(ee["a"])(Zt,ae.ORDER_INFO,(function(t,e){t.orderInfo=e||null})),Object(ee["a"])(Zt,ae.USER_INFO,(function(t,e){t.userInfo=e||null})),Object(ee["a"])(Zt,ae.REMARK_INFO,(function(t,e){t.remarkInfo=e||null})),Zt),ce=new ne["a"].Store({state:se,getters:ie,actions:re,mutations:oe}),le=(n("4f89"),n("f753")),ue=n.n(le),de=(n("44ce"),n("1cfa")),fe=n.n(de);a["default"].config.productionTip=!1,a["default"].prototype.axios=ue.a,a["default"].use(N.a),ue.a.defaults.baseURL="https://ele-interface.herokuapp.com",ue.a.interceptors.request.use((function(t){return"post"==t.method&&(t.data=fe.a.stringify(t.data)),M["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),t}),(function(t){return Promise.reject(t)})),ue.a.interceptors.response.use((function(t){return M["Indicator"].close(),t}),(function(t){return Promise.reject(t)})),new a["default"]({router:te,store:ce,render:function(t){return t(u)}}).$mount("#app")},5753:function(t,e,n){"use strict";var a=n("134a"),s=n.n(a);s.a},"593f":function(t,e,n){},"5bb4":function(t,e,n){},6729:function(t,e,n){},"6a54":function(t,e,n){},"6c4a":function(t,e,n){"use strict";var a=n("6a54"),s=n.n(a);s.a},"6d6c":function(t,e,n){},"7c37":function(t,e,n){"use strict";var a=n("4ac5"),s=n.n(a);s.a},"7e59":function(t,e,n){},"85a4":function(t,e,n){"use strict";var a=n("48f6"),s=n.n(a);s.a},"919c":function(t,e,n){},a93e:function(t,e,n){},ab69:function(t,e,n){"use strict";var a=n("51e0"),s=n.n(a);s.a},add2:function(t,e,n){"use strict";var a=n("a93e"),s=n.n(a);s.a},b640:function(t,e,n){t.exports=n.p+"img/logo.118ef9a7.jpg"},d730:function(t,e,n){t.exports=n.p+"img/waimai.d6070008.png"},e55b:function(t,e,n){"use strict";var a=n("593f"),s=n.n(a);s.a},e6b9:function(t,e,n){},fb63:function(t,e,n){"use strict";var a=n("2cce"),s=n.n(a);s.a},ff60:function(t,e,n){"use strict";var a=n("7e59"),s=n.n(a);s.a}});
//# sourceMappingURL=app.e7ae72cd.js.map